# üß™ –¢–µ—Å—Ç–æ–≤–æ–µ Workmate

![Python Version](https://img.shields.io/badge/python-3.13-blue)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ**: [–û—Ç–∫—Ä—ã—Ç—å Google Doc](https://docs.google.com/document/d/1Kyj6X7poy2e1lKUaZasNDIFnMYdAlyDdQ9FCBkBCe1s)

‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –¢–ó, –≤–∫–ª—é—á–∞—è –±–ª–æ–∫ ¬´–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ¬ª.  
üìê –ü—Ä–æ–µ–∫—Ç –Ω–∞–ø–∏—Å–∞–Ω –ø–æ **DDD**.  
üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: **100%**  
üõ† –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏–Ω—Ç–µ—Ä—ã, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤.

–ö–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ –≤ –∫–∞–∫–∏—Ö-—Ç–æ –≤–∞–∂–Ω—ã—Ö –∏–ª–∏ –Ω–µ –æ—á–µ–≤–∏–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –ø–æ–∫—Ä–æ—é –¥–æ–∫—Å—Ç—Ä–∏–Ω–≥–∞–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: [`black`](https://github.com/psf/black) + [`isort`](https://github.com/PyCQA/isort)
- **–õ–∏–Ω—Ç–∏–Ω–≥**: [`ruff`](https://github.com/astral-sh/ruff)
- **–ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤**: [`mypy`](http://mypy-lang.org/)
- **–ü—Ä–µ-–∫–æ–º–º–∏—Ç —Ö—É–∫–∏**: [`pre-commit`](https://pre-commit.com/)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `pytest`, `pytest-cov`, `hypothesis`, `pytest-mock`, `pytest-html`, `pytest-mypy`

---

## üõ† Makefile

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —É–¥–æ–±–Ω—ã–π `Makefile` —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ coverage –æ—Ç—á–µ—Ç–∞.  
**–¶–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `make lint`


### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

| –ö–æ–º–∞–Ω–¥–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
|--------------------------|----------------------------------------------|
| `make install`           | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤     |
| `make clean`             | –£–¥–∞–ª–µ–Ω–∏–µ –∫—ç—à–µ–π, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ |


### üßπ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

| –ö–æ–º–∞–Ω–¥–∞           | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
|-------------------|----------------------------------------------|
| `make lint`       | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞: `black`, `isort`, `ruff`      |
| `make format`     | –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `black` + `isort`         |
| `make type-check` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Å `mypy`                      |
| `make check`      | –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫: `lint + type + test`   |


### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ö–æ–º–∞–Ω–¥–∞                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                       |
|-----------------------------|----------------------------------------------------------------|
| `make test`                 | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (`pytest`)                                       |
| `make test-ci-codecov`      | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º (–¥–ª—è CI, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `coverage.xml`)   |
| `make test-coverage`        | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å HTML-–æ—Ç—á—ë—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è (`htmlcov/`)             |
| `make test-coverage-view`   | –û—Ç–∫—Ä—ã—Ç—å HTML-–æ—Ç—á—ë—Ç –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ                         |

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

> ‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**, –Ω–æ —Ç–µ—Å—Ç—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –¥–∞.

### üßæ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/iriswolf/testovoe-workmate.git
cd testovoe-workmate
````

### üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry

Poetry –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä:

```bash
pip install poetry
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

```bash
python -m app --type payout --input ./path-to-file1.csv ./path-to-file2.csv
```

---

## üß™ –¢–µ—Å—Ç—ã

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:

```bash
poetry install --with test --no-root
poetry run pytest tests
```

---

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
poetry install --no-root
```

–ë—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–≤–µ –≥—Ä—É–ø–ø—ã:

### `dev` ‚Äî –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞:

* `black`, `isort` ‚Äî –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* `ruff` ‚Äî –ª–∏–Ω—Ç–∏–Ω–≥
* `mypy` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
* `pre-commit` ‚Äî —Ö—É–∫–∏

### `test` ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

* `pytest`, `pytest-cov`, `pytest-html`, `pytest-mock`
* `pytest-mypy`, `hypothesis`

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞

1. –°–æ–∑–¥–∞—Ç—å `ValueObject` –æ—Ç—á—ë—Ç–∞ –≤ `app/domain/reports/entities/report/value_objects.py`.
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –¥–æ–±–∞–≤—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `app/domain/reports/entities/report/validators/`.
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∏–ª–∏ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–∏—Å–µ (`app/domain/reports/services/`).
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä—ã:
   * **Formatter** ‚Üí `infrastructure/adapters/application/formatters`
   * **Writer** ‚Üí `infrastructure/adapters/application/writers`
   * **Parser** ‚Üí `infrastructure/adapters/domain/parsers`
   * **Reader** ‚Üí `infrastructure/adapters/domain/readers`
5. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–æ—Ä –≤ `app/application/reports/interactors/`.
6. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–æ—Ä–∞ –≤ `app/__main__.py`.